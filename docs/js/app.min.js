"use strict";!function(){function e(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function t(t,n,o){var r,i=new Promise(function(i,u){e(r=t[n].apply(t,o)).then(i,u)});return i.request=r,i}function n(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function o(e,n,o,r){r.forEach(function(r){r in o.prototype&&(e.prototype[r]=function(){return t(this[n],r,arguments)})})}function r(e,t,n,o){o.forEach(function(o){o in n.prototype&&(e.prototype[o]=function(){return this[t][o].apply(this[t],arguments)})})}function i(e,n,o,r){r.forEach(function(r){r in o.prototype&&(e.prototype[r]=function(){return e=this[n],(o=t(e,r,arguments)).then(function(e){if(e)return new c(e,o.request)});var e,o})})}function u(e){this._index=e}function c(e,t){this._cursor=e,this._request=t}function s(e){this._store=e}function a(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function p(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new a(n)}function f(e){this._db=e}n(u,"_index",["name","keyPath","multiEntry","unique"]),o(u,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),i(u,"_index",IDBIndex,["openCursor","openKeyCursor"]),n(c,"_cursor",["direction","key","primaryKey","value"]),o(c,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(c.prototype[t]=function(){var n=this,o=arguments;return Promise.resolve().then(function(){return n._cursor[t].apply(n._cursor,o),e(n._request).then(function(e){if(e)return new c(e,n._request)})})})}),s.prototype.createIndex=function(){return new u(this._store.createIndex.apply(this._store,arguments))},s.prototype.index=function(){return new u(this._store.index.apply(this._store,arguments))},n(s,"_store",["name","keyPath","indexNames","autoIncrement"]),o(s,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),i(s,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),r(s,"_store",IDBObjectStore,["deleteIndex"]),a.prototype.objectStore=function(){return new s(this._tx.objectStore.apply(this._tx,arguments))},n(a,"_tx",["objectStoreNames","mode"]),r(a,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new s(this._db.createObjectStore.apply(this._db,arguments))},n(p,"_db",["name","version","objectStoreNames"]),r(p,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new a(this._db.transaction.apply(this._db,arguments))},n(f,"_db",["name","version","objectStoreNames"]),r(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[s,u].forEach(function(t){t.prototype[e.replace("open","iterate")]=function(){var t,n=(t=arguments,Array.prototype.slice.call(t)),o=n[n.length-1],r=this._store||this._index,i=r[e].apply(r,n.slice(0,-1));i.onsuccess=function(){o(i.result)}}})}),[u,s].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,o=[];return new Promise(function(r){n.iterateCursor(e,function(e){e?(o.push(e.value),void 0===t||o.length!=t?e.continue():r(o)):r(o)})})})});var d={open:function(e,n,o){var r=t(indexedDB,"open",[e,n]),i=r.request;return i.onupgradeneeded=function(e){o&&o(new p(i.result,e.oldVersion,i.transaction))},r.then(function(e){return new f(e)})},delete:function(e){return t(indexedDB,"deleteDatabase",[e])}};"undefined"!=typeof module?(module.exports=d,module.exports.default=module.exports):self.idb=d}();
"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var DataStore=function(){function e(){_classCallCheck(this,e),this.cachename="rr-app",this.openDatabase()}return _createClass(e,[{key:"openDatabase",value:function(){var e=this;this.cache=idb.open(this.cachename,1,function(t){switch(t.oldVersion){case 0:e.createStore(t,"restaurants","_id");e.createStore(t,"reviews","_id").createIndex("byRestaurant","restaurant_id");e.createStore(t,"failedRequests","id",!0)}})}},{key:"createStore",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.createObjectStore(t,{keyPath:n,autoIncrement:a})}},{key:"getCachedData",value:function(e){return this.cache.then(function(t){return t.transaction(e).objectStore(e).getAll()})}},{key:"getCachedDataById",value:function(e,t){return this.cache.then(function(n){return n.transaction(e).objectStore(e).getAll(t)})}},{key:"getCachedDataByIndex",value:function(e,t,n){return this.cache.then(function(a){return a.transaction(e).objectStore(e).index(t).getAll(n)})}},{key:"cacheOne",value:function(e,t){this.cacheAll(e,[t])}},{key:"deleteOne",value:function(e,t){this.cache.then(function(n){n.transaction(e,"readwrite").objectStore(e).delete(t)})}},{key:"getStoreKeys",value:function(e){return this.cache.then(function(t){return t.transaction(e).objectStore(e).getAllKeys()})}},{key:"cacheAll",value:function(e,t){this.cache.then(function(n){var a=n.transaction(e,"readwrite").objectStore(e);t.forEach(function(e){a.put(e)})})}}]),e}();
"use strict";var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var DBHelper=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"sendRequest",value:async function(e,t){var n=new Request(e,t);try{var a=fetch(n),r=await a,i=await r.json();return Promise.resolve(i)}catch(e){throw Error(e)}}},{key:"fetchData",value:function(t,n,a){var r=e.RequestHeaders;r.append("Accept","application/json; charset=utf-8");var i={method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:r};e.sendRequest(t,i).then(function(t){"restaurants"===n||"reviews"===n?(t.sort(function(t,n){return e.sortByObjectID(t,n,"asc")}),e.updateIndexedDB("GETALL",n,t)):e.updateIndexedDB("ONE",n,t),a(null,t)}).catch(function(e){return a(e,null)})}},{key:"updateIndexedDB",value:function(t,n,a){if(e.IndexedDBSupport)switch(t){case"GETALL":e.AppStore.cacheAll(n,a);break;case"DELETE":e.AppStore.deleteOne(n+"s",a.id);break;default:e.AppStore.cacheOne(n+"s",a)}}},{key:"fetchRestaurants",value:function(t){e.IndexedDBSupport?e.AppStore.getCachedData("restaurants").then(function(n){n.length>=10&&(t(null,n),t=function(){}),e.fetchData(e.RESTAURANTS_URL,"restaurants",t)}):e.fetchData(e.RESTAURANTS_URL,"restaurants",t)}},{key:"fetchRestaurantById",value:function(t,n){e.IndexedDBSupport?e.AppStore.getCachedDataById("restaurants",t).then(function(a){a.length>0&&(n(null,a[0]),n=function(){}),e.fetchData(e.RESTAURANTS_URL+"/"+t,"restaurant",n)}):e.fetchData(e.RESTAURANTS_URL+"/"+t,"restaurant",n)}},{key:"fetchRestaurantReviews",value:function(t,n){e.IndexedDBSupport?e.AppStore.getCachedDataByIndex("reviews","byRestaurant",t).then(function(a){a.length>0&&(n(null,a),n=function(){}),e.fetchData(e.RESTAURANTS_URL+"/"+t+"/reviews","reviews",n)}):e.fetchData(e.RESTAURANTS_URL+"/"+t+"/reviews","reviews",n)}},{key:"fetchAllReviews",value:function(t){e.IndexedDBSupport?e.AppStore.getCachedData("reviews").then(function(n){n.length>0&&(t(null,n),t=function(){}),e.fetchData(e.REVIEWS_URL,"reviews",t)}):e.fetchData(e.REVIEWS_URL,"reviews",t)}},{key:"sortByObjectID",value:function(e,t,n){var a=void 0;return"asc"===n?a=e._id.localeCompare(t._id):"desc"===n&&(a=t._id.localeCompare(e._id)),a}},{key:"fetchUniqueAttributes",value:function(e,t){var n=e.map(function(n,a){return e[a][t]}),a=n.filter(function(e,t){return n.indexOf(e)==t});return a.sort(),a}},{key:"urlForRestaurant",value:function(t){return e.DOMAIN_URL+"restaurant.html?id="+t._id}},{key:"imageUrlForRestaurant",value:function(t){var n=t.photograph;return n+=".jpg",e.DOMAIN_URL+"img/"+n}},{key:"fetchRestaurantByCuisineAndNeighborhood",value:function(t,n,a){e.fetchRestaurants(function(r,i){r?a(r,null):e.filterlist("cuisine_type",t,i,function(t){e.filterlist("neighborhood",n,t,function(e){a(null,e)})})})}},{key:"filterlist",value:function(e,t,n,a){var r=n;"all"!=t&&(r=r.filter(function(n){return n[e]==t})),a(r)}},{key:"favoriteHandler",value:function(t,n){var a=e.RESTAURANTS_URL+"/"+t,r={method:"PATCH",body:JSON.stringify({is_favorite:n})};return e.sendData(a,r,"restaurant")}},{key:"postReview",value:function(t){var n=e.RESTAURANTS_URL+"/"+t.restaurant_id+"/reviews",a={method:"POST",body:JSON.stringify(t)};return e.sendData(n,a,"review")}},{key:"updateReview",value:function(t){var n=t._id;if(n.toString().startsWith("temp")){var a=parseInt(n.split("temp").pop());return e.AppStore.getCachedDataById("failedRequests",a).then(function(n){var a=n[0];a.body=t;var r={request_status:"fail",target:"review",idbsupport:e.IndexedDBSupport,data:a.body};return e.updateIndexedDB("CACHEONE","failedRequest",a),Promise.resolve(r)})}var r=e.REVIEWS_URL+"/"+n,i={method:"PUT",body:JSON.stringify(t)};return e.sendData(r,i,"review")}},{key:"deleteReview",value:function(t){if(t.toString().startsWith("temp")){var n=parseInt(t.split("temp").pop());return e.AppStore.getCachedDataById("failedRequests",n).then(function(a){a[0];e.AppStore.deleteOne("failedRequests",n);var r={request_status:"fail",target:"review",idbsupport:e.IndexedDBSupport,data:{id:t}};return Promise.resolve(r)})}var a=e.REVIEWS_URL+"/"+t;return e.sendData(a,{method:"DELETE"},"review")}},{key:"sendData",value:function(t,n,a){var r=e.RequestHeaders;return r.append("Content-Type","application/json; charset=utf-8"),n.mode="cors",n.cache="no-cache",n.credentials="same-origin",n.headers=r,e.sendRequest(t,n).then(function(t){var r={request_status:"success",target:a,idbsupport:e.IndexedDBSupport};return"DELETE"===n.method?r.data={id:t.result[0]}:r.data=t,e.updateIndexedDB(n.method,a,r.data),Promise.resolve(r)}).catch(function(r){return Promise.resolve(e.handleFailedRequest(t,n,a))})}},{key:"handleFailedRequest",value:function(t,n,a){var r={request_status:"fail",target:a,idbsupport:e.IndexedDBSupport,data:[]};if(e.IndexedDBSupport){var i={url:t,target:a,method:n.method};if("DELETE"===n.method)r.data={id:t.split("/").pop()};else{var u=JSON.parse(n.body);if("review"===a){if(!("id"in u&&"_id"in u))return e.AppStore.getStoreKeys("failedRequests").then(function(r){var i=r.length+1;return u.id="temp"+i,u._id="temp"+i,n.body=JSON.stringify(u),e.handleFailedRequest(t,n,a)});r.data=u,i.body=u}else r.data=u,i.body=u}e.AppStore.cacheOne("failedRequests",i)}return Promise.resolve(r)}},{key:"fetchFailedRequests",value:function(){return e.IndexedDBSupport?e.AppStore.getCachedData("failedRequests"):Promise.resolve([])}},{key:"DOMAIN_URL",get:function(){return"https://katerina-tziala.github.io/restaurant_reviews_app/"}},{key:"RESTAURANTS_URL",get:function(){return"https://restreviews-eb12.restdb.io/rest/restaurants"}},{key:"REVIEWS_URL",get:function(){return"https://restreviews-eb12.restdb.io/rest/reviews"}},{key:"IndexedDBSupport",get:function(){var e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,t=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction||{READ_WRITE:"readwrite"},n=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;return!!(e&&t&&n)}},{key:"AppStore",get:function(){return new DataStore}},{key:"RequestHeaders",get:function(){var e=new Headers;return e.append("x-apikey","5c5428e3640ec41c0c24ec1e"),e.append("Cache-Control","no-cache"),e}}]),e}();
"use strict";var closeNotification=function(e){e.preventDefault(),hideNotification(),self.timeoutMessage=setTimeout(function(){clearNotification()},2e3)},displayNotification=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.notificationContainer;e.classList.add("displayNotification"),e.setAttribute("role","alert"),e.setAttribute("aria-live","assertive")},hideNotification=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.notificationContainer;e.classList.remove("displayNotification"),e.removeAttribute("role"),e.removeAttribute("aria-live")},clearNotification=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.notificationContainer;var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self.notificationTitle,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:self.notificationMessage;e.innerHTML="",t.innerHTML="",removeFreezer(),self.timeoutMessage>0&&clearTimeout(self.timeoutMessage),self.notificationInterval>0&&clearNotificationCountDown(self.timeoutMessage)},clearNotificationCountDown=function(){clearInterval(self.notificationInterval),self.notificationCountdown=0},removeFreezer=function(){var e=document.querySelectorAll(".freezer");e.length>0&&e[0].remove()},displayFreezer=function(){var e=document.createElement("div");e.className="freezer",document.body.appendChild(e)},createNotification=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self.notificationTitle,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:self.notificationMessage;t.innerHTML=e.title,i.innerHTML=e.message},getNotification=function(e){return{update:{title:"update available",message:"A new version of the Restaurant Reviews app is available!"},offline:{title:"Unable to connect! retrying...",message:"You are able to use the Restaurant Reviews app while offline!"},online:{title:"You are back online!",message:"Internet connection was successfully re-established!"},failed_request_cached:{title:"Unable to connect! retrying...",message:"Your changes will be saved as soon as connection is re-established!"},failed_request:{title:"Unable to connect!",message:"Your changes were not saved! Please try again later!"},unsaved_changes:{title:"You have ",message:"Your changes will be saved in <span id='message_timer'>10<span>"},saving_changes:{title:"Your changes are being saved!",message:"Please wait...<br>You will be notified for the result as soon as possible"},refresh:{title:"All your changes were successfully saved!",message:"Refresh the app or reload the page to see the latest changes!"}}[e]},displayFailureNotification=function(e){clearNotification(),createNotification(getNotification(e?"failed_request_cached":"failed_request")),createGotItButton(),displayNotification(),self.timeoutMessage=setTimeout(function(){hideNotification()},15e3)},createUpdateNotification=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.notificationMessage;createNotification(getNotification("update"));var t=document.createElement("div");t.className="buttonsWrapper";var i=createButton("btn_update","update","update app",updateApp);i.classList.add("notification_button","update_btn");var a=createButton("btn_dismiss","dismiss","dismiss update",dismissUpdate);a.classList.add("notification_button","update_btn"),t.append(i,a),e.append(t)},createGotItButton=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.notificationMessage,t=document.createElement("div");t.classList.add("buttonsWrapper");var i=createButton("btn_gotit","got it","close notification",closeNotification);i.classList.add("notification_button","gotit_btn"),t.append(i),e.append(t)};
"use strict";var notificationInterval=void 0,notificationCountdown=void 0,checkForFailedRequests=function(){return DBHelper.fetchFailedRequests().then(function(t){var e=t,i=[],n=[];return e.length>0&&(e.sort(function(t,e){return sortByID(t,e,"desc")}),e.forEach(function(t){"restaurant"===t.target&&i.includes(t.url)?DBHelper.AppStore.deleteOne("failedRequests",t.id):(i.push(t.url),n.push(t))})),Promise.resolve(n)})},checkForAppDataUpdate=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];checkForFailedRequests().then(function(e){e.length>0?showUnsavedChangesNotification(e.length):t&&displayRefreshNotification()})},showUnsavedChangesNotification=function(t){var e=t,i=1===e?"change":"changes",n=getNotification("unsaved_changes");n.title+=e+" unsaved "+i+"!",clearNotification(),createNotification(n),createSaveNowButton(),displayFreezer(),displayNotification(),addNotificationCountDown()},addNotificationCountDown=function(){self.notificationInterval="",self.notificationCountdown=9,self.notificationInterval=setInterval(function(){document.getElementById("message_timer").innerHTML=self.notificationCountdown,self.notificationCountdown--,self.notificationCountdown<1&&(clearNotificationCountDown(),updateAppData(),showSavingNotification())},1e3)},showSavingNotification=function(){var t=getNotification("saving_changes");clearNotification(),createNotification(t),createGotItButton(),displayNotification(),self.timeoutMessage=setTimeout(function(){hideNotification()},15e3)},updateAppData=function(){checkForFailedRequests().then(function(t){t.length>0&&saveRequests(t)})},saveRequests=function t(e){if(e.length>0){var i=e[0],n=prepareRequestParams(i);setTimeout(function(){DBHelper.sendData(n.url,n.options,n.target).then(function(n){DBHelper.AppStore.deleteOne("failedRequests",i.id),e.shift(),t(e)})},500)}else checkForAppDataUpdate(!0)},prepareRequestParams=function(t){var e={url:t.url,options:{method:t.method},target:t.target};if("body"in t){var i=t.body;"id"in i&&i.id.toString().startsWith("temp")?(delete i.id,delete i._id,e.options.body=JSON.stringify(i)):e.options.body=JSON.stringify(i)}return e},saveNow=function(t){clearNotificationCountDown(),updateAppData(),showSavingNotification()},refreshApp=function(){window.location.reload(!0)},displayRefreshNotification=function(){var t=getNotification("refresh");clearNotification(),createNotification(t),createRefreshButton(),displayNotification()},createSaveNowButton=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.notificationMessage,e=document.createElement("div");e.classList.add("buttonsWrapper");var i=createButton("btn_savenow","save now","save changes now",saveNow);i.classList.add("notification_button","btn_savenow"),e.append(i),t.append(e)},createRefreshButton=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.notificationMessage,e=document.createElement("div");e.classList.add("buttonsWrapper");var i=createButton("btn_refresh","refresh","refresh the app",refreshApp);i.classList.add("notification_button","btn_refresh");var n=createButton("btn_dismiss_ref","dismiss","dismiss refreshing the app",closeNotification);n.classList.add("notification_button","btn_dismiss_ref"),e.append(i,n),t.append(e)};
"use strict";var main=void 0,loader=void 0,spinner=void 0,newMap=void 0,notificationContainer=void 0,notificationTitle=void 0,notificationMessage=void 0,timeoutMessage=void 0,markers=[],initialized_map=!1,app_scope=void 0,new_worker=void 0;document.addEventListener("DOMContentLoaded",function(e){self.app_scope="/restaurant_reviews_app/",self.new_worker="",self.timeoutMessage=0;var t=window.location.href;""===t.split(self.app_scope).pop()?window.location=t+"index.html":(registerServiceWorker(),getBasicDomElements(),initView(),setTimeout(function(){checkForAppDataUpdate()},2e4),DBHelper.fetchAllReviews(function(e,t){}))});var getBasicDomElements=function(){self.main=document.getElementById("main"),self.loader=document.getElementById("loader_container"),self.spinner=document.getElementById("spinner"),self.notificationContainer=document.getElementById("notification"),self.notificationTitle=document.getElementById("notification_title"),self.notificationMessage=document.getElementById("notificationMessage")},initView=function(){switch(getUserView()){case"index":loadStyle("css/index.min.css",function(){loadScript("js/index.min.js",function(){renderIndex()})});break;case"restaurant":loadStyle("css/restaurant.min.css",function(){loadScript("js/restaurant.min.js",function(){renderRestaurant()})})}};window.addEventListener("online",function(e){e.preventDefault(),enableMap(),clearNotification();var t=getNotification("online");checkForFailedRequests().then(function(e){if(e.length>0){var n=e.length,i="<br>You have "+n+" unsaved "+(1===n?"change":"changes")+"!";i+="<br>"+getNotification("unsaved_changes").message,t.message+=i,createNotification(t),createSaveNowButton(),displayFreezer(),displayNotification(),addNotificationCountDown()}else createNotification(t),createGotItButton(),displayNotification(),self.timeoutMessage=setTimeout(function(){hideNotification()},15e3)})}),window.addEventListener("offline",function(e){e.preventDefault(),clearNotification();var t=getNotification("offline");self.initialized_map||(t.message+="<br><i><b>Notice: </b>The map is not currently available since it was not loaded yet!<i>",disableMap()),createNotification(t),createGotItButton(),displayNotification(),self.timeoutMessage=setTimeout(function(){hideNotification()},15e3)});var registerServiceWorker=function(){"serviceWorker"in navigator?navigator.serviceWorker.register("ServiceWorker.js",{scope:self.app_scope}).then(function(e){navigator.serviceWorker.controller&&(e.waiting?updateReady(e.waiting):e.installing?trackInstalling(e.installing):e.addEventListener("updatefound",function(){trackInstalling(e.installing)}))}).catch(function(e){console.log("Oh No! Service Worker registration failed! Error: "+e)}):console.log("Oh No! Service Workers are not supported!")},trackInstalling=function(e){e.addEventListener("statechange",function(){"installed"==e.state&&updateReady(e)})},updateReady=function(e){self.new_worker=e,clearNotification(),createUpdateNotification(),displayNotification(),self.notificationContainer.classList.add("update_app")},dismissUpdate=function(e){hideNotification(),clearNotification()},updateApp=function(e){self.new_worker.postMessage({action:"skipWaiting"}),hideNotification(),clearNotification(),self.new_worker=""},enableMap=function(){switch(getUserView()){case"index":displayElement(document.getElementById("checkbox_container"));break;case"restaurant":document.getElementById("mapButton").setAttribute("onclick","toggleMap(event)")}},disableMap=function(){switch(getUserView()){case"index":hideElement(document.getElementById("checkbox_container"));break;case"restaurant":document.getElementById("mapButton").removeAttribute("onclick")}},getUserView=function(){return window.location.href.split("/").pop().split(".")[0]},loadScript=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=document.createElement("script");if(i.type="application/javascript",i.src=e,Object.keys(n).length>0)for(var a=0;a<Object.keys(n).length;a++){var o=Object.keys(n)[a],s=n[o];i.setAttribute(o,s)}i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,t())}:i.onload=function(){t()},document.body.appendChild(i)},loadStyle=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=document.createElement("link");if(i.type="text/css",i.rel="stylesheet",i.href=e,Object.keys(n).length>0)for(var a=0;a<Object.keys(n).length;a++){var o=Object.keys(n)[a],s=n[o];i.setAttribute(o,s)}i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null,t())}:i.onload=function(){t()},document.head.appendChild(i)},fetcherMessage=function(e,t,n){var i="";i="filters"===e?"<span>No results matching your criteria!</span><span>Please try again!</span>\n        <i>Hint: Search with a different combination of neighborhoods and cuisines!</i>":"<span>No reviews yet!</span>";var a=document.createElement("div");a.className="fetcherMessageContainer";var o=document.createElement("p");o.className="fetcherMessage",o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive");var s=document.createElement("i");s.innerHTML="feedback",s.classList.add("feedback_icon","material-icons");var r=document.createElement("p");r.innerHTML=i,r.className="fetcherFeedback",o.append(s,r),a.append(o),t.insertBefore(a,n)},removeFetcherMessage=function(){var e=document.querySelectorAll(".fetcherMessageContainer");e.length>0&&e[0].remove()},setTabIndex=function(e,t){for(var n=0;n<e.length;n++)e[n].setAttribute("tabindex",t)},showLoader=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.spinner,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self.loader;e.classList.add("spin"),displayElement(t),hideElement(self.main)},hideLoader=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.spinner;arguments.length>1&&void 0!==arguments[1]?arguments[1]:self.loader;e.classList.remove("spin"),hideElement(self.loader),displayElement(self.main)},displayElement=function(e){e.classList.remove("hidden")},hideElement=function(e){e.classList.add("hidden")},createButton=function(e,t,n,i){var a=document.createElement("button");return a.innerHTML=t,a.setAttribute("id",e),a.setAttribute("aria-label",n),a.addEventListener("click",i),a.type="button",a},sortByID=function(e,t,n){var i=void 0;return"asc"===n?i=parseFloat(e.id)-parseFloat(t.id):"desc"===n&&(i=parseFloat(t.id)-parseFloat(e.id)),i};
